# Research Tests Makefile (Auto-generated by CMake)
#
# This Makefile is automatically generated when you run CMake configuration.
# It stays in sync with the library's dependencies and build settings.
#
# Usage:
#   make <name>           - Compile <name>.cpp to executable <name>
#   make all              - Compile all .cpp files in this directory
#   make clean            - Remove all generated executables
#
# Example:
#   $ make test_multiplicity_methods
#   $ ./test_multiplicity_methods
#
# Note: These are research/debug tests that may require updates to compile.

# Paths (auto-configured by CMake)
PROJECT_ROOT := @PROJECT_SOURCE_DIR@
BUILD_DIR := @PROJECT_BINARY_DIR@
INCLUDE_DIR := $(PROJECT_ROOT)/include
BUILD_INCLUDE_DIR := $(BUILD_DIR)/include

# Compiler settings (from CMake configuration)
CXX := @CMAKE_CXX_COMPILER@
CXXFLAGS := @CMAKE_CXX_FLAGS@ -std=c++11 -Wall -I$(INCLUDE_DIR) -I$(BUILD_INCLUDE_DIR)
LDFLAGS := @PLAYGROUND_LINK_FLAGS@

# Add high-precision flags if enabled
@PLAYGROUND_HP_FLAGS@

# Find all .cpp files in current directory
SOURCES := $(wildcard *.cpp)
TARGETS := $(basename $(SOURCES))

# Default target: show help
.DEFAULT_GOAL := help

.PHONY: help
help:
	@echo "Research Tests Makefile (Auto-generated by CMake)"
	@echo ""
	@echo "Usage:"
	@echo "  make <name>       Compile <name>.cpp to executable <name>"
	@echo "  make all          Compile all .cpp files in this directory"
	@echo "  make clean        Remove all generated executables"
	@echo ""
	@echo "Available tests:"
	@for src in $(SOURCES); do echo "  - $${src%.cpp}"; done
	@echo ""
	@echo "Note: These tests may require updates to compile with current codebase."

# Build all executables
.PHONY: all
all: $(TARGETS)

# Pattern rule: compile any .cpp file to executable
%: %.cpp
	@echo "Compiling $< ..."
	$(CXX) $(CXXFLAGS) $< -o $@ $(LDFLAGS)
	@echo "✅ Created executable: $@"
	@echo "   Run with: ./$@"

# Clean generated files
.PHONY: clean
clean:
	@echo "Cleaning research test executables..."
	@rm -f $(TARGETS)
	@echo "✅ Clean complete"

# Force rebuild of a specific target
.PHONY: force-%
force-%:
	@rm -f $*
	@$(MAKE) $*

