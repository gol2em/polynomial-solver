# Playground Makefile (Auto-generated by CMake)
#
# This Makefile is automatically generated when you run CMake configuration.
# It stays in sync with the library's dependencies and build settings.
#
# Usage:
#   make <name>           - Compile <name>.cpp to executable <name>
#   make all              - Compile all .cpp files in this directory
#   make clean            - Remove all generated executables
#
# Example:
#   Create test.cpp in this directory, then:
#   $ make test
#   $ ./test
#
# Note: If you add new dependencies to the library, re-run cmake to update this Makefile.

# Paths (auto-configured by CMake)
PROJECT_ROOT := @PROJECT_SOURCE_DIR@
BUILD_DIR := @PROJECT_BINARY_DIR@
INCLUDE_DIR := $(PROJECT_ROOT)/include

# Compiler settings (from CMake configuration)
CXX := @CMAKE_CXX_COMPILER@
CXXFLAGS := @CMAKE_CXX_FLAGS@ -std=c++11 -Wall -I$(INCLUDE_DIR)
LDFLAGS := @PLAYGROUND_LINK_FLAGS@

# Add high-precision flags if enabled
@PLAYGROUND_HP_FLAGS@

# Find all .cpp files in current directory (excluding subdirectories)
SOURCES := $(wildcard *.cpp)
TARGETS := $(basename $(SOURCES))

# Default target: show help
.DEFAULT_GOAL := help

.PHONY: help
help:
	@echo "Playground Makefile (Auto-generated by CMake)"
	@echo ""
	@echo "Usage:"
	@echo "  make <name>       Compile <name>.cpp to executable <name>"
	@echo "  make all          Compile all .cpp files in this directory"
	@echo "  make clean        Remove all generated executables"
	@echo ""
	@echo "Example:"
	@echo "  1. Create test.cpp in this directory"
	@echo "  2. Run: make test"
	@echo "  3. Run: ./test"
	@echo ""
	@echo "Current .cpp files: $(SOURCES)"
	@echo ""
	@echo "Note: This Makefile is auto-generated. Re-run cmake to update."

# Build all executables
.PHONY: all
all: $(TARGETS)

# Pattern rule: compile any .cpp file to executable
# The % pattern matches the filename without extension
%: %.cpp
	@echo "Compiling $< ..."
	$(CXX) $(CXXFLAGS) $< -o $@ $(LDFLAGS)
	@echo "✅ Created executable: $@"
	@echo "   Run with: ./$@"

# Clean generated files
.PHONY: clean
clean:
	@echo "Cleaning playground executables..."
	@rm -f $(TARGETS)
	@echo "✅ Clean complete"

# Force rebuild of a specific target
.PHONY: force-%
force-%:
	@rm -f $*
	@$(MAKE) $*

